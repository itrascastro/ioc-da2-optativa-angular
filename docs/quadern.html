---
layout: quadern
title: "Quadern de Notes"
quadern: true
sidebar: false
breadcrumb: false
---

<!-- Vista Dashboard -->
<div id="dashboard-view" class="view active" role="tabpanel" aria-labelledby="dashboard-btn">
  <div class="dashboard-container">
    <!-- Capçalera: Cerca i Filtres -->
    <div class="dash-header" role="region" aria-label="Cerca i filtres">
      <div class="search-wrapper">
        <i class="bi bi-search search-icon" aria-hidden="true"></i>
        <input type="text" id="dashboard-search" class="search-input" placeholder="Buscar notes..." aria-label="Buscar notes">
        <button type="button" id="dashboard-search-clear" class="search-clear" aria-label="Netejar cerca i etiquetes" title="Netejar">
          <i class="bi bi-x-circle" aria-hidden="true"></i>
        </button>
      </div>
      <div class="dash-actions">
        <button class="btn btn-outline" data-action="open-filter" aria-label="Filtrar per etiquetes">
          <i class="bi bi-funnel" aria-hidden="true"></i>
          <span class="hide-sm">Etiquetes</span>
        </button>
        <button class="btn btn-outline" data-action="open-study" aria-label="Vista d'Estudi">
          <i class="bi bi-book" aria-hidden="true"></i>
          <span class="hide-sm">Estudi</span>
        </button>
      </div>
    </div>

    <!-- Navegació per etiquetes (píndoles) -->
    <nav class="tag-filters" id="dashboard-tag-filters" aria-label="Filtre ràpid per etiqueta"></nav>

    <!-- Llista de notes agrupades per data -->
    <section id="recent-notes" class="notes-timeline" aria-live="polite">
      <div class="empty-state">
        <p>Encara no tens notes. Crea la teva primera nota!</p>
      </div>
    </section>
  </div>
</div>

<!-- Vista Editor -->
<div id="editor-view" class="view" role="tabpanel" aria-labelledby="editor-btn">
    <div class="editor-container editor-single">
        <div class="editor-main">
            <div id="editor-header" class="editor-header"></div>

            <div class="editor-form">
                <select id="note-select" aria-label="Selecciona una nota de la secció">
                    <option value="">Selecciona una nota…</option>
                </select>
                <input type="text" id="note-tags" placeholder="Etiquetes (separades per comes)" aria-label="Etiquetes de la nota">
                <!-- Hidden sync field for compatibility with existing JS -->
                <textarea id="note-content" aria-hidden="true" hidden></textarea>
                <!-- Rich editor container (auto-initialized by Quadern.RichEditor) -->
                <div id="qre-editor" class="qre" data-no-theme data-sync-target="#note-content"></div>
            </div>

            <!-- Panell de notes de la secció seleccionada (controlat per Editor.js) -->
            <div id="notes-list" class="notes-list"></div>
        </div>
    </div>
</div>

<!-- Vista Cerca -->
<div id="search-view" class="view" role="tabpanel" aria-labelledby="search-btn">
    <div class="search-container">
        <!-- Sidebar Filtres -->
        <div class="search-filters">
            <div class="filter-section">
                <h3>Filtres de Cerca</h3>
                
                <div class="filter-group">
                    <label for="date-from">Data des de:</label>
                    <input type="date" id="date-from" class="filter-input">
                </div>
                
                <div class="filter-group">
                    <label for="date-to">Data fins:</label>
                    <input type="date" id="date-to" class="filter-input">
                </div>
                
                <div class="filter-group">
                    <label for="unit-filter">Unitat:</label>
                    <select id="unit-filter" class="filter-select">
                        <option value="">Totes les unitats</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="block-filter">Bloc:</label>
                    <select id="block-filter" class="filter-select">
                        <option value="">Tots els blocs</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Etiquetes:</label>
                    <div class="tags-filter" id="tags-filter">
                        <!-- Etiquetes dinàmiques -->
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button class="btn btn-primary" id="apply-filters">Aplicar Filtres</button>
                    <button class="btn btn-outline" id="clear-filters">Netejar</button>
                </div>
            </div>
        </div>

        <!-- Resultats de Cerca -->
        <div class="search-results">
            <div class="search-header">
                <h3>Resultats de Cerca</h3>
                <div class="search-controls">
                    <span id="results-count">0 resultats</span>
                    <div class="view-toggle">
                        <button class="toggle-btn active" data-view="grid" aria-label="Vista en graella">
                            <i class="bi bi-grid-3x3-gap" aria-hidden="true"></i>
                        </button>
                        <button class="toggle-btn" data-view="list" aria-label="Vista en llista">
                            <i class="bi bi-list" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="results-container" id="search-results-container">
                <div class="empty-state">
                    <i class="bi bi-search" aria-hidden="true"></i>
                    <p>Utilitza la barra de cerca o els filtres per trobar notes.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Vista Import/Export -->
<div id="import-export-view" class="view" role="tabpanel" aria-labelledby="import-export-btn">
    <div class="view-header">
        <h2>Gestió de Dades</h2>
        <p>Importa i exporta les teves notes</p>
    </div>

    <div class="import-export-container">
        <!-- Importar -->
        <div class="card">
            <div class="card-header">
                <i class="bi bi-upload" aria-hidden="true"></i>
                <h3>Importar Notes</h3>
            </div>
            <div class="card-body">
                <div class="upload-area" id="upload-area">
                    <i class="bi bi-file-earmark-arrow-up upload-icon" aria-hidden="true"></i>
                    <h4>Arrossega el fitxer aquí</h4>
                    <p>o fes clic per seleccionar</p>
                    <input type="file" id="import-file" accept=".json" aria-label="Seleccionar fitxer JSON">
                </div>
                <div class="import-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="merge-notes" checked>
                        <span>Fusionar amb notes existents</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="backup-before-import">
                        <span>Crear còpia de seguretat abans d'importar</span>
                    </label>
                </div>
                <button class="btn btn-primary" id="import-btn" disabled>
                    <i class="bi bi-upload" aria-hidden="true"></i>
                    Importar Notes
                </button>
            </div>
        </div>

        <!-- Exportar -->
        <div class="card">
            <div class="card-header">
                <i class="bi bi-download" aria-hidden="true"></i>
                <h3>Exportar Notes</h3>
            </div>
            <div class="card-body">
                <div class="export-options">
                    <div class="export-option" data-format="json">
                        <i class="bi bi-filetype-json" aria-hidden="true"></i>
                        <h4>JSON</h4>
                        <p>Format complet per importar posteriorment</p>
                        <button class="btn btn-outline export-btn" data-format="json">
                            Exportar JSON
                        </button>
                    </div>
                    <div class="export-option" data-format="html">
                        <i class="bi bi-filetype-html" aria-hidden="true"></i>
                        <h4>HTML</h4>
                        <p>Document web llegible</p>
                        <button class="btn btn-outline export-btn" data-format="html">
                            Exportar HTML
                        </button>
                    </div>
                    <div class="export-option" data-format="pdf">
                        <i class="bi bi-filetype-pdf" aria-hidden="true"></i>
                        <h4>PDF</h4>
                        <p>Document per impressió</p>
                        <button class="btn btn-outline export-btn" data-format="pdf">
                            Exportar PDF
                        </button>
                    </div>
                    <div class="export-option" data-format="markdown">
                        <i class="bi bi-markdown" aria-hidden="true"></i>
                        <h4>Markdown</h4>
                        <p>Format de text pla amb format</p>
                        <button class="btn btn-outline export-btn" data-format="markdown">
                            Exportar Markdown
                        </button>
                    </div>
                </div>
                
                <div class="export-settings">
                    <h4>Opcions d'Exportació</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-timestamps" checked>
                        <span>Incloure dates de creació/modificació</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-metadata" checked>
                        <span>Incloure metadades (unitat, bloc, secció)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="group-by-structure" checked>
                        <span>Agrupar per estructura del curs</span>
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Vista d'Estudi -->
<div id="study-view" class="view" role="tabpanel" aria-labelledby="study-btn">
    <div class="study-container">
        <!-- Contingut d'estudi -->
        <div class="study-content" id="study-content">
            <div class="study-header">
                <h2>Vista d'Estudi del Curs</h2>
                <div class="study-controls">
                    <button class="btn btn-outline" id="print-study">
                        <i class="bi bi-printer" aria-hidden="true"></i>
                        Imprimir
                    </button>
                    <button class="btn btn-outline" id="export-study">
                        <i class="bi bi-download" aria-hidden="true"></i>
                        Exportar
                    </button>
                </div>
            </div>
            
            <div class="study-body" id="study-body">
                <div class="empty-state">
                    <i class="bi bi-book" aria-hidden="true"></i>
                    <h3>No hi ha notes per mostrar</h3>
                    <p>Crea algunes notes per veure-les en format d'estudi.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Botó tornar a dalt -->
    <button class="back-to-top" id="back-to-top" aria-label="Tornar a dalt">
        <i class="bi bi-arrow-up" aria-hidden="true"></i>
    </button>
</div>

<!-- Modal de confirmació -->
<div class="modal" id="confirm-modal" role="dialog" aria-labelledby="confirm-title" aria-modal="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="confirm-title">Confirmar Acció</h3>
            <button class="modal-close" id="confirm-close" aria-label="Tancar modal">
                <i class="bi bi-x" aria-hidden="true"></i>
            </button>
        </div>
        <div class="modal-body">
            <p id="confirm-message">Estàs segur que vols fer aquesta acció?</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="confirm-cancel">Cancel·lar</button>
            <button class="btn btn-primary" id="confirm-accept">Confirmar</button>
        </div>
    </div>
</div>

<!-- Notificació toast -->
<div class="toast" id="toast" role="alert" aria-live="polite">
    <div class="toast-content">
        <i class="toast-icon" aria-hidden="true"></i>
        <span class="toast-message"></span>
        <button class="toast-close" aria-label="Tancar notificació">
            <i class="bi bi-x" aria-hidden="true"></i>
        </button>
    </div>
</div>
