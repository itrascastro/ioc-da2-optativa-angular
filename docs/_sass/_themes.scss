/* Variables del mode fosc */
[data-theme="dark"] {
  --color-primary: #d3d3d3;
  --color-secondary: #d3d3d3;
  --color-accent: #d3d3d3;
  --color-background: #333;
  --color-surface: #444;
  --color-surface-dark: #3a3a3a;
  --color-border: #555;
  --color-text: #d3d3d3;
  --color-text-muted: #aaa;
  --shadow-light: 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.3);

  /* Variables de components (mode fosc) */
  --comp-bg: #1e1e1e;
  --comp-header-bg: #2c2c2c;
  --comp-header-fg: #e6edf3;
  --comp-border: #444444;
  --comp-info: #7aa2e3;
  --comp-success: #81c784;
  --comp-warning: #e1b962;
  --comp-error: #ef9a9a;
  --comp-solution: #81c784;
  --comp-suggestion: #7ec1bd;
  /* IA en fosc */
  --comp-ai: #84c5f0;

  /* Fons de capçalera per tipus (fosc) – gamma grisos per coherència */
  --comp-info-hbg: var(--comp-header-bg);
  --comp-success-hbg: var(--comp-header-bg);
  --comp-warning-hbg: var(--comp-header-bg);
  --comp-error-hbg: var(--comp-header-bg);
  --comp-solution-hbg: var(--comp-header-bg);
  --comp-suggestion-hbg: var(--comp-header-bg);
  --comp-ai-hbg: var(--comp-header-bg);

  /* (sense variable específica per botons en fosc) */
}

/* Overrides de components en mode fosc */
[data-theme="dark"] .content-body h2 .qnp-add .qnp-badge {
  background-color: #2a2a2a; /* to gris fosc per a coherència */
  color: #e6edf3;
  border-color: var(--color-border);
}
[data-theme="dark"] .responsive-table th { background-color: #2c2c2c; color: #e6edf3; }
[data-theme="dark"] .responsive-table tr:hover { background-color: rgba(255,255,255,0.04); }

[data-theme="dark"] .btn,
[data-theme="dark"] .nav-dropdown-btn,
[data-theme="dark"] .nav-button,
[data-theme="dark"] .theme-toggle { background-color: #3a3a3a; color: #e6edf3; border: 1px solid #555; }
[data-theme="dark"] .btn:hover,
[data-theme="dark"] .nav-dropdown-btn:hover,
[data-theme="dark"] .nav-button:hover,
[data-theme="dark"] .theme-toggle:hover { background-color: #3a3a3a; }
[data-theme="dark"] .btn:disabled,
[data-theme="dark"] .nav-button:disabled { background-color: var(--color-border); color: #bbbbbb; }

/* Botó perill (confirmació) en mode fosc: mantenir vermell */
[data-theme="dark"] .btn-danger { background-color: var(--comp-error); border: 1px solid var(--comp-error); color: #fff; }
[data-theme="dark"] .btn-danger:hover { background-color: var(--comp-error); }

[data-theme="dark"] .nav-dropdown-item:hover,
[data-theme="dark"] .nav-dropdown-item.current { background-color: #353535; color: #ffffff; }
[data-theme="dark"] .skip-link { background: #4a4a4a; }

/* Breadcrumb/horizontal nav: keep links blue in dark mode */
[data-theme="dark"] .horizontal-nav .horizontal-nav-item {
  color: #3498db;
}
[data-theme="dark"] .horizontal-nav .horizontal-nav-item:hover {
  color: #7aa2e3;
}
/* Mantener el elemento actual (no enlace) en color de texto, no azul */
[data-theme="dark"] .horizontal-nav .horizontal-nav-item.current {
  color: var(--color-text);
}

/* Sidebar (Contingut del Bloc) en fosc */
[data-theme="dark"] .sidebar-section { background-color: #222; border-color: #333; }
[data-theme="dark"] .nav-link { background-color: #2a2a2a; color: #e6edf3; }
[data-theme="dark"] .nav-link:hover { background-color: #353535; color: #ffffff; }
[data-theme="dark"] .nav-link.current { background-color: #3d3d3d; color: #ffffff; }

/* Portada i índex d'unitat en mode fosc */
[data-theme="dark"] .unit-hero { background-color: #2c2c2c; color: #e6edf3; }
[data-theme="dark"] .unit-header { background-color: #2a2a2a; color: #e6edf3; }
[data-theme="dark"] .block-number { background-color: #3a3a3a; color: #ffffff; }
[data-theme="dark"] .block-action:hover { background-color: #353535; }
/* Barra de progrés en fosc: farcit amb to blau per contrast */
[data-theme="dark"] .progress-fill-footer { background-color: #7aa2e3; }
[data-theme="light"] .sidebar-section h3 {
  /* Amplia el contrast del separador en mode clar */
  border-bottom-color: rgba(0, 0, 0, 0.22);
}
[data-theme="light"] .sidebar .sidebar-section {
  /* Fer visibles els 4 costats en mode clar */
  border: 1px solid rgba(0, 0, 0, 0.22) !important;
  border-radius: var(--border-radius);
}
[data-theme="light"] .sidebar .sidebar-section:last-child {
  border-bottom: 1px solid rgba(0, 0, 0, 0.22) !important;
}

/* En el layout per defecte, assegurar els 4 costats visibles (override de regles de quadern) */
/* (ja no cal limitar-ho a default-layout) */
