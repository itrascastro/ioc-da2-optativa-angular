/* Scoped Rich Editor styles (qre) based on dev-resources/rich-12.html */
.qre{ --editor-h:240px; --modal-h:70vh; --radius:10px; --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; --sans: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, Arial, "Noto Sans", sans-serif; --scrollbar-bg:#eef0f2; --scrollbar-thumb:#c2c6cc; --scrollbar-thumb-hover:#aeb3ba; }
.qre[data-theme="light"]{ --bg:#f6f7f9; --panel:#fff; --text:#111827; --muted:#7a8699; --border:#e5e7eb; --border-strong:#d1d5db; --toolbar:#f3f4f6; --icon:#374151; --icon-hover:#111827; --picker-bg:#ffffff; --picker-text:#111827; --picker-border:#d1d5db; --code-bg:#f6f8fa; --code-fg:#24292f; --html-bg:#ffffff; --html-fg:#0f172a; --html-border:#d1d5db; }
.qre[data-theme="dark"]{ --panel: var(--color-surface); --toolbar: var(--color-surface-dark); --text: var(--color-text); --muted: var(--color-text-muted); --border: var(--color-border); --border-strong: var(--color-border); --icon: var(--color-text); --icon-hover: var(--color-text); --picker-bg: var(--color-surface); --picker-text: var(--color-text); --picker-border: var(--color-border); --code-bg: var(--color-surface-dark); --code-fg: var(--color-text); --html-bg: var(--color-surface); --html-fg: var(--color-text); --html-border: var(--color-border); }
.qre *{ box-sizing:border-box; font-family:var(--sans); }
.qre .panel{ background:var(--panel); border:1px solid var(--border); border-radius:10px; }
.qre .head{ display:grid; gap:8px; grid-template-columns: 1fr auto; align-items:center; padding:8px 10px; border-bottom:1px solid var(--border); background:var(--toolbar); }
.qnp-panel .qre .head{ position: relative; z-index: 1; }
.qre .fields{ display:grid; gap:6px; grid-template-columns:1fr 1fr; align-items:center; }
.qre .input{ width:100%; padding:8px 10px; border:1px solid var(--border-strong); border-radius:8px; background:var(--panel); color:var(--text); font-size:14px; }
.qre .actions{ display:flex; gap:6px; }
.qre .iconbtn{ width:30px; height:30px; border:1px solid var(--border-strong); background:var(--panel); border-radius:8px; cursor:pointer; font:700 13px/1 var(--mono); color:var(--icon); }
.qre .iconbtn:hover{ color:var(--icon-hover); }
.qre .theme-toggle{ margin-left:6px; gap:6px; display:flex; align-items:center; }
.qre .theme-toggle label{ font-size:12px; color:var(--muted); }
.qre .ql-toolbar.ql-snow{ border:none; border-bottom:1px solid var(--border); background:var(--toolbar); padding:6px 8px; }
.qre .ql-snow .ql-stroke{ stroke:var(--icon) !important; }
.qre .ql-snow .ql-fill{ fill:var(--icon) !important; }
.qre .ql-snow .ql-picker{ color:var(--text) !important; }
.qre .ql-snow .ql-picker-label{ border-color:var(--border-strong) !important; }
.qre .ql-snow .ql-picker-options{ background:var(--picker-bg) !important; color:var(--picker-text) !important; border:1px solid var(--picker-border) !important; }
.qre .ql-toolbar .ql-picker-options, .qre .ql-tooltip{ z-index:10000 !important; }
.qre .editor{ padding:8px 10px 10px; }
.qre .editor .ql-container{ border:none; height:var(--editor-h); }
.qre .editor .ql-editor{ height:100%; overflow:auto; line-height:1.45; color:var(--text); }
.qre .ql-editor pre{ border:1px solid var(--border); border-radius:8px; padding:10px 12px; background:var(--code-bg); }
.qre .ql-editor pre.ql-syntax{ background:var(--code-bg)!important; color:var(--code-fg)!important; font:13px/1.35 var(--mono); white-space:pre; overflow:auto; }
.qre dialog.c-modal{ border:1px solid var(--border); border-radius:12px; padding:0; width:min(1100px,96vw); max-height:92vh; background:var(--panel); }
.qre dialog::backdrop{ background:rgba(0,0,0,.35); }
.qre .m-head{ display:flex; align-items:center; gap:8px; padding:8px 10px; border-bottom:1px solid var(--border); background:var(--toolbar); position:sticky; top:0; z-index:4; }
.qre .m-title{ font-weight:600; font-size:14px; }
.qre .m-actions{ margin-left:auto; display:flex; gap:6px; }
.qre .m-body{ padding:10px; }
.qre #toolbar-full.ql-toolbar{ border:none; background:transparent; padding:0; }
.qre .codebox{ width:100%; min-height:40vh; max-height:72vh; overflow:auto; background:var(--html-bg); color:var(--html-fg); border:1px solid var(--html-border); border-radius:8px; padding:12px; font:13px/1.45 var(--mono); white-space:pre; word-break:break-word; resize:none; }
.qre .hint{ padding:6px 10px 10px; color:var(--muted); font-size:12px; border-top:1px dashed var(--border); }
@media (max-width:900px){ .qre .fields{ grid-template-columns:1fr; } }
@media (max-width:720px){ .qre{ --editor-h:160px; } }
.qre dialog.c-modal{ max-height:92vh; overflow:hidden; }
.qre .m-body{ padding:10px; overflow:hidden; }
.qre .m-body .ql-container{ height: var(--modal-h); border:none; }
.qre .m-body .ql-editor{ height: 100%; overflow: auto; }

/* Fixed form height with internal scroll (panel) */
.qnp-panel .qre{ height: 280px; }
.qnp-panel .qre .panel{ height: 100%; display:flex; flex-direction: column; }
.qnp-panel .qre .editor{ flex: 1; min-height: 0; padding: 6px 10px 6px; overflow: hidden; }
.qnp-panel .qre .editor .ql-container{ height: 100%; overflow: hidden; }
.qnp-panel .qre .editor .ql-editor{ overflow: auto !important; }
.qnp-panel .qre .ql-toolbar.ql-snow{ padding: 4px 6px; position: sticky; top: 0; z-index: 2; background: var(--toolbar); border-bottom: 1px solid var(--border); }

/* Ensure header compacts nicely on small screens */
.qre .actions .iconbtn{ display:inline-flex; align-items:center; justify-content:center; }
